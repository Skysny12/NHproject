<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link href="https://fonts.googleapis.com/css2?family=Jua&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <title>NH Traveler</title>
  <style>
    :root{ --brand:#FFB300; --header-h:56px; }
    *{box-sizing:border-box}
    html,body{height:100%; margin:0;}
    body{ font-family:'Roboto','Spoqa Han Sans Neo',sans-serif; background:#fefefe; color:#222; }

    .header{
      position:fixed; top:0; left:0; right:0; height:var(--header-h);
      display:flex; align-items:center; justify-content:space-between;
      padding:0 18px; background:#fff; box-shadow:0 2px 6px rgba(0,0,0,.1); z-index:200;
    }
    .logo{font-family:'Jua',sans-serif; font-size:22px; font-weight:700; color:#444}
    .logo .nh{color:var(--brand)}

    .section{
      display:none; height:100vh; width:100%; padding-top:var(--header-h);
      box-sizing:border-box; overflow-y:auto;
    }
    .section.active{display:flex; flex-direction:column; align-items:center; justify-content:flex-start;}

    .btn{
      display:flex; align-items:center; justify-content:center;
      width:70%; max-width:320px; margin:10px auto; padding:14px 20px;
      font-size:16px; font-weight:600; border:none; border-radius:14px;
      cursor:pointer; transition:.25s ease; line-height:1.4; white-space:nowrap;
    }
    .btn:active{transform:scale(0.97);}
    .btn-main{background:var(--brand); color:#fff;}
    .btn-main:hover{opacity:0.9;}
    .text-btn{ margin-top:16px; background:none; border:none; color:#FF6F00; font-size:14px; cursor:pointer; }

    .file-box{
      width:80%; max-width:280px; margin:15px auto; padding:20px;
      border:2px dashed #FFB300; border-radius:12px; text-align:center; background:#fffdf5;
    }
    .file-box input{ width:100%; border:none; outline:none; font-size:14px; }

    #scheduleSection { background:url('파리.png') no-repeat center/cover; color:#fff; text-align:center; }
    .analysis-title { font-family:'Jua',sans-serif; font-size:20px; font-weight:700; margin:20px 0; color:#fff; text-shadow:0 2px 6px rgba(0,0,0,.4); }
    .analysis-title .nh { color:var(--brand); }
    .schedule-date { color:#FF6F00; font-weight:700; margin:15px 0 8px; text-align:left; }
    .schedule-box { background:rgba(255,255,255,0); border-radius:16px; box-shadow:0 2px 6px rgba(0,0,0,.1); padding:15px; margin-bottom:15px; backdrop-filter:blur(6px); }
    .schedule-item { padding:12px; border-radius:12px; border:1px solid rgba(255,255,255,0.25); margin-bottom:10px; color:#fff; background:rgba(255,255,255,0.05); font-weight:500; }
    .schedule-item.main { background:rgba(255,179,0,0.9); color:#fff; font-weight:700; cursor:pointer; }

    #mapSection.section{ padding-top:var(--header-h); }
    #map { width:100%; height:600px; border-radius:12px; overflow:hidden; }

    .map-cta { width:100%; padding:12px 0 24px; background:#fff;text-align:center; }
    .map-cta .btn-main{ width:90%; max-width:420px; }

    .bottom-sheet {
      position: fixed; left: 0; right: 0; bottom: -100%;
      background:#fff; border-radius:20px 20px 0 0; box-shadow:0 -4px 12px rgba(0,0,0,.15);
      padding:20px; max-height:70vh; overflow-y:auto; transition:bottom .35s ease; z-index:10000;
    }
    .bottom-sheet.active { bottom:0; }
    .sheet-close{ position:sticky; top:-10px; margin-left:auto; width:32px; height:32px; border:none; border-radius:16px; background:#f2f2f2; font-size:18px; cursor:pointer; }

    #reportSection h2 { margin:20px 0 5px; }

    .report-summary {
      text-align:center;
      margin:5px 0;
    }
    .report-summary img {
      width:200px; 
      height:auto;
      margin:0 auto;
      display:block;
    }

    .report-card {
      background:#FFF3E0;
      border-radius:16px;
      padding:16px;
      width:90%;
      max-width:380px;
      text-align:center;
      margin:0 auto 12px;
    }
    .report-card img {
      width:70px !important;   
      height:auto;
      display:block;
      margin:0 auto 10px;
    }

    .report-list {
      width:90%;
      max-width:380px;
      background:#fff;
      border-radius:12px;
      box-shadow:0 2px 6px rgba(0,0,0,.05);
      padding:15px;
      text-align:left;
      overflow-y:auto;
      max-height:300px;
    }

    .report-item {
      display:flex;
      justify-content:space-between;
      font-size:14px;
      margin-bottom:10px;
    }
    .report-item span:last-child {
      color:#2E7D32;
      font-weight:700;
    }
  </style>

  <script defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCor1bE_qsL59o_7Xl7H-NdXYnOhMDo74s&callback=initMap"></script>
</head>
<body>
  <div class="header"><div class="logo"><span class="nh">NH</span> Traveler</div></div>

  <!-- 홈 -->
  <div id="homeScreen" class="section active">
    <img src="창문.png" alt="비행기 창문" style="width:310px; margin-bottom:15px;">
    <h2 style="font-family:'Jua',sans-serif; font-size:24px; margin-bottom:0;">여행 계획을 업로드하면</h2>
    <p style="font-size:15px; color:#555; line-height:1.8; max-width:320px; text-align:center; margin:0 auto 20px;">
      방문지 주변의 모든 할인 가맹점을 알려드려요.<br>최고 혜택을 받을 수 있는 카드까지 추천해드릴게요.
    </p>
    <button class="btn btn-main" onclick="goToSchedule()">업로드</button>
  </div>

  <!-- 일정 업로드 -->
  <div id="questionScreen" class="section">
    <div style="width:300px; height:180px; overflow:hidden; border-radius:12px; margin:40px auto 25px;">
      <img src="도시.png" alt="도시" style="width:100%; height:100%; object-fit:cover;">
    </div>
    <h2 style="font-family:'Jua',sans-serif; font-size:24px; margin-bottom:1px;">여행 일정을 업로드해주세요!</h2>
    <div class="file-box"><input type="file" id="scheduleFile" accept="application/pdf"></div>
    <button class="btn btn-main" onclick="uploadSchedule()">여행 일정 업로드</button>
    <button class="text-btn" onclick="swap('questionScreen','homeScreen')">◀ 전으로</button>
  </div>

  <!-- 일정 화면 -->
  <div id="scheduleSection" class="section">
    <h2 class="analysis-title"><span class="nh">농협</span> 님의 여행 일정 분석을 완료했어요!</h2>
    <div style="width:90%; max-width:380px;">
      <p class="schedule-date">11월 24일</p>
      <div class="schedule-box">
        <div class="schedule-item main" onclick="goToMap()">간사이 공항<br><small>1 Senshu Kuko Kita, Izumisano, Japan</small></div>
        <div class="schedule-item">재팬 호텔<br><small>6 Chome-10-1 Roppongi, Minato City, Osaka</small></div>
        <div class="schedule-item">롯폰기 힐즈<br><small>6 Chome-10-1 Roppongi, Minato City, Osaka</small></div>
      </div>
      <p class="schedule-date">11월 25일</p>
      <div class="schedule-collapsed">2일차 일정</div>
      <p class="schedule-date">11월 26일</p>
      <div class="schedule-collapsed">3일차 일정</div>
    </div>
    <button class="text-btn" onclick="swap('scheduleSection','questionScreen')">◀ 전으로</button>
  </div>

  <!-- 지도 섹션 -->
  <div id="mapSection" class="section">
    <div id="map"></div>
    <div class="map-cta">
      <button class="btn btn-main" onclick="showReportSection()">여행 지출 리포트 보기</button>
      <button class="text-btn" onclick="swap('mapSection','scheduleSection')">◀ 전으로</button>
    </div>
  </div>

  <!-- 바텀시트 -->
  <div id="bottomSheet" class="bottom-sheet"></div>

  <!-- 리포트 -->
  <div id="reportSection" class="section">
    <h2 style="font-family:'Jua',sans-serif; font-size:22px; margin:10px;">여행 지출 리포트</h2>
    <div class="report-summary">
      <div style="width:280px; height:190px; margin:0 auto 12px; overflow:hidden; border-radius:12px;">
         <img src="비행기.jpg" alt="비행기" style="width:100%; height:100%; object-fit:contain; display:block;">
      </div>
      <p style="font-size:18px; font-weight:700; color:#FF9800; margin:3px 0;">농협 님! 즐거운 여행 되셨나요?</p>
      <p style="font-size:14px; color:#555; margin-bottom:20px;">농협님의 여행 지출 리포트가 도착했어요</p>
    </div>
    <div class="report-card">
      <img src="축하.png" alt="축하">
      <p style="font-size:15px; color:#333; margin:0;">약 <b style="color:#FF6F00;">121,250원</b> 혜택, NH카드로 누려보세요!</p>
    </div>
    <div class="report-list">
      <div class="report-item"><span>잇쇼니라멘 <small>22:10</small></span><span>+2,300원</span></div>
      <div class="report-item"><span>오사카성 <small>21:55</small></span><span>+4,800원</span></div>
      <div class="report-item"><span>호텔 뉴 오사카 <small>20:15</small></span><span>+15,000원</span></div>
    </div>
    <button class="text-btn" style="margin-top:20px;" onclick="swap('reportSection','mapSection')">◀ 전으로</button>
  </div>

  <script>
    
    const places = {
      sushi:     { title:"스시잔마이", benefit:"zgm.the pay카드로 5% 할인", address:"스시/초밥집<br>1 Chome-9-20 Sennichimae, Osaka", img:"스시집.jpg" },
      ramen:     { title:"잇쇼니라멘", benefit:"zgm.the pay카드로 5% 적립", address:"일본라면 전문식당<br>〒540-0026 Osaka", img:"라멘.jpg" },
      castle:    { title:"오사카성",   benefit:"zgm.the pay카드로 입장권 20% 할인", address:"성곽<br>大阪城", img:"오사카 성.jpg" },
      shopping:  { title:"난바 파크스", benefit:"zgm.the pay카드로 5만원 이상 구매 시 2000원 할인", address:"쇼핑몰<br>Nanbanaka", img:"쇼핑.jpg" },
      hotel:     { title:"호텔 뉴 오사카", benefit:"zgm.the pay카드로 수수료 無, 포인트 적립", address:"ニューオーサカホテル", img:"호텔.jpg" },
      dotonbori: { title:"도톤보리", benefit:"zgm.the pay카드로<br> 식사 결제 시 5% 할인", address:"道頓堀<br>〒542-0071 오사카시 주오구", img:"도톤.jpg" },
      tower:     { title:"쓰텐카쿠 타워", benefit:"zgm.the pay카드 사용 시<br> 전망대 입장권 10% 할인", address:"전망대<br>通天閣", img:"타워.jpg" },
      shinsaibashi:{ title:"신사이바스지 상점", benefit:"zgm.the pay카드 사용 시<br> 5% 캐시백", address:"상업지구<br>心斎橋筋商店街", img:"신사이.jpg" },
      onsen:     { title:"나니와노유 온천", benefit:"zgm.the pay카드로<br>입장료 10% 적립", address:"天然温泉 なにわの湯", img:"온천.jpg" }
    };

    
    function setActive(id){
      document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }
    function swap(_,nextId){ setActive(nextId); }
    function goToSchedule(){ setActive('questionScreen'); }
    function uploadSchedule(){ setActive('scheduleSection'); }
    function goToMap(){
      setActive('mapSection');
      setTimeout(() => {
        if (window.google && window.google.maps && map) {
          google.maps.event.trigger(map, 'resize');
          map.setCenter({ lat: 34.6937, lng: 135.5023 });
        }
      }, 0);
    }
    function showReportSection(){ setActive('reportSection'); }

    /* ---------- 지도 ---------- */
    let map;
    function initMap() {
      const center = { lat: 34.6937, lng: 135.5023 };
      map = new google.maps.Map(document.getElementById("map"), { center, zoom: 12 });

      const locations = {
        sushi: { lat: 34.68, lng: 135.5128 },
        ramen: { lat: 34.6852, lng: 135.5147 },
        castle:{ lat: 34.6872571, lng: 135.5236659 },
        shopping:{ lat: 34.6635, lng: 135.5015 },
        hotel: { lat: 34.6996, lng: 135.4950 },
        dotonbori:   { lat: 34.6685324, lng: 135.5040921 },
        tower:       { lat: 34.6748292, lng: 135.4872269 },
        shinsaibashi:{ lat: 34.6768533, lng: 135.4963145 },
        onsen:       { lat: 34.7150129, lng: 135.5109827 }
      };

      const bounds = new google.maps.LatLngBounds();

      Object.entries(locations).forEach(([key, pos]) => {
        const info = places[key]; 
        const lat = typeof pos.lat === 'string' ? parseFloat(pos.lat) : pos.lat;
        const lng = typeof pos.lng === 'string' ? parseFloat(pos.lng) : pos.lng;
        if (!Number.isFinite(lat) || !Number.isFinite(lng)) { console.warn('좌표 이상:', key, pos); return; }

        const marker = new google.maps.Marker({
          position: { lat, lng },
          map,
          title: info ? info.title : key
        });

        marker.addListener("click", () => { if (info) showPlaceCard(key); });
        bounds.extend({ lat, lng });
      });

      if (!bounds.isEmpty()) map.fitBounds(bounds);
    }

    /* ---------- 바텀시트 ---------- */
    function showPlaceCard(key){
      const data = places[key];
      const sheet = document.getElementById("bottomSheet");
      sheet.innerHTML = `
        <button class="sheet-close" onclick="closeSheet()">×</button>
        <img src="${data.img}" alt="${data.title}" style="width:100%; height:auto; border-radius:12px; margin-bottom:10px;">
        <h3 style="margin:0; font-size:18px; font-weight:700; color:#333;">${data.title}</h3>
        <p style="margin:6px 0; font-size:14px; color:#555;">${data.address}</p>
        <div style="background:#fff; border-radius:14px; padding:20px; margin:16px 0; text-align:center; box-shadow:0 2px 6px rgba(0,0,0,0.1);">
          <img src="카드아이콘.png" alt="카드 아이콘" style="width:50px; height:50px; margin-bottom:10px;">
          <p style="margin:0; font-size:15px; font-weight:600; color:#FF6F00;">${data.benefit}</p>
        </div>
        <div style="background:#fff; border-radius:14px; padding:14px; margin:16px 0; text-align:center; box-shadow:0 2px 6px rgba(0,0,0,0.1);">
          <div style="width:200px; height:130px; margin:0 auto 8px; overflow:hidden; border-radius:12px;">
            <img src="일본카드.png" alt="카드 이미지" style="width:100%; height:100%; object-fit:cover;">
          </div>
          <p style="color:#666; font-size:14px; margin:0 0 8px; line-height:1.4;">zgm.일본여행중 카드를 사용하면<br>10% 적립받을 수 있어요</p>
          <button class="btn btn-main" style="width:100%; border-radius:10px; padding:10px 0; font-size:15px;">신청하기</button>
        </div>
      `;
      sheet.classList.add("active");
    }
    function closeSheet(){ document.getElementById("bottomSheet").classList.remove("active"); }
  </script>
</body>
</html>






















